<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <title> TAG Machine </title>
        <link rel='stylesheet' href='style.css'>

        <!--Load the locally-stored jquery library-->
        <script src="/include/jquery.min.js"></script>

        <!--Some Javscript...-->
        <script>
            var open = true; //Is the sidebar open?
            var lastHash; //The hash of the last console update

            //Function for calculating a hash for a string
            String.prototype.hashCode = function(){
                var hash = 0;
                if (this.length == 0) return hash;
                for (i = 0; i < this.length; i++) {
                    char = this.charCodeAt(i);
                    hash = ((hash<<5)-hash)+char;
                    hash = hash & hash; // Convert to 32bit integer
                }
                return hash;
            }

            //Function for toggling the sidebar
            function toggleNav() {
                if(open){
                    document.getElementById("mySidebar").style.width = "0";
                    document.getElementById("main").style.marginLeft = "50px";
                    open = false;
                }else{
                    document.getElementById("mySidebar").style.width = "120px";
                    document.getElementById("main").style.marginLeft = "120px";
                    open = true;
                } 
            }
            
            //When the document loads, start updating the console
            $(document).ready(function(){
                updateConsole();
    
            });

            //Update the console
            function updateConsole(){
                //Load the console.txt file into the console
                $('#console').load('console.txt');

                //If the hash of the text area is different than the last hash, scroll down
                if(document.getElementById('console').textContent.hashCode() != lastHash){
                    $('#console').scrollTop($('#console')[0].scrollHeight);
                    lastHash = document.getElementById('console').textContent.hashCode();
                }

                //Repeat this function in 1s
                setTimeout(updateConsole, 1000);
            }

            

        </script>
    </head>

    <body>
        
        <div id="mySidebar" class="sidebar">
            <a href="#">Console</a>
        </div>
        <button class="openbtn" onclick="toggleNav()">â˜°</button>
        <div id="main">
            <h1 style="font-size:40px;margin:0;background-color:black;color:white;padding:5px 10px;">TAG MACHINE</h1>
            <h1>Console</h1>
            <textarea id="console" rows="40" cols="64">
Loading...
            </textarea>
        </div>

        
        
    </body>
</html> 
