<!DOCTYPE html>
<html lang=en>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink_to_fit=no">

        <link rel="shortcut icon" href="/favicon.ico">
        
        <title> TAG Machine </title>

        <!--Load Bootstrap-->
        <link rel='stylesheet' href='/lib/bs.css'>
        <!--Load jQuery-->
        <script src="/lib/jq.js"></script>
        <!--Load Bootstrap Javascript (includes Popper)-->
        <script src="/lib/bs.js"></script>

        <!--Load Javascript-->
        <script>
            //Load the navbar
            $.get("/nav.html", function(data){
                $("#navigation").replaceWith(data);
            });

            //Load the settings form
            $.get("/settings_data", function(data){
                $("#settings").replaceWith(data);

                //When the submit button is clicked, the settings form is POSTed to the ESP and an alert is displayed in the browser
                $("#settings-form").submit(function(event){
                    event.preventDefault();
                    $("#submit-button").html("Saving...");
                    $("#submit-button").prop('disabled', true);
                    $.post("/settings_data", $("#settings-form").serialize(), function(data){
                        alert("Settings Updated! TAG Machine is Restarting...");
                        $("#submit-button").html("Save and Restart");
                        $("#submit-button").prop('disabled', false);
                    });
                });

            });

            
            
        </script>

    </head>

    <body>
        <!--This will be replaced with the navbar-->
        <div id="navigation"></div>

        <!--Main container-->
        <main class="container">
            <header class="page-header header container">
                <h2>Settings</h2>
                <br>
            </header>
            
            <!--Settings Area-->
            <form id="settings-form" name="settings-form" style="max-width: 500px;">
                <!--This will be replaced with the dynamic settings form-->
                <div id="settings">
                    Loading Settings...
                </div>

                <a class="btn btn-dark float-left" role="button" href="/settings.txt" download="settings.txt">Export Settings</a>

                <button type="submit" class="btn btn-dark float-right" id="submit-button">Save and Restart</button>
            </form>
            
            <br>

        </main>
        
        

    </body>
</html> 
